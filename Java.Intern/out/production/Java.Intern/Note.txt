1.ThreadPool - quáº£n lÃ½ luá»“ng
*Má»¥c Ä‘Ã­ch :
-Giáº£m overhead khi pháº£i táº¡o/deploy thread liÃªn tá»¥c (TÃ¡i sá»­ dá»¥ng láº¡i Thread khai bÃ¡o ra 10 thÃ¬ dÃ¹ng 10 , tháº±ng 1 xong thÃ¬ láº¥y láº¡i nÃ³ Ä‘áº¯p chÃ´ tháº±ng 11 - 12 )
*á»¨ng dá»¥ng:
-Web Server xá»­ lÃ½ nhiá»u request
-Xá»­ lÃ½ task báº¥t Ä‘á»“ng bá»™ (executorService, Scheduled ExecutorServer)
*NhÆ°á»£c Ä‘iá»ƒm
-DÃ¹ng chung luá»“ng -> dá»… share dá»¯ liá»‡u vÃ´ tÃ¬nh náº¿u khÃ´ng cáº©n tháº­n gÃ¢y ra deadlock / race condition
-Náº¿u khÃ´ng reset state dá»… dÃ­nh memory leak 


2.ThreadLocal - quáº£n lÃ½ dá»¯ liá»‡u theo luá»“ng
*Má»¥c Ä‘Ã­ch :
Táº¡o ra biáº¿n toÃ n cá»¥c theo tá»«ng thread riÃªng biá»‡t (1 2 dÃ¹ng local riÃªng tÃ­nh toÃ¡n tá»‘t nhÆ°ng Ä‘áº¿n cuá»‘i sáº½ cÃ³ thá»ƒ bá»‹ trÃ n ram )
*á»¨ng dá»¥ng :
-LÆ°u session/user info trong má»—i thread xá»­ lÃ½ HTTP Request
-LÆ°u context tradeId/log Id trong microservices
-JDBC Connection context trong transaction
*NhÆ°á»£c Ä‘iá»ƒm :
-Memory Leak cá»±c kÃ¬ nguy hiá»ƒm nháº¥t lÃ  káº¿t há»£p vá»›i threadpool (do thread sá»‘ng dai mÃ  threadlocal khÃ´ng Ä‘Æ°á»£c remove() )
-KhÃ´ng cÃ³ giao tiáº¿p giá»¯a cÃ¡c thread -> khÃ´ng dÃ¹ng Ä‘á»ƒ chia sáº» dá»¯ liá»‡u 


*Mask:
ThreadPool Ä‘á»ƒ tiáº¿t kiá»‡m tÃ i nguyÃªn CPU ğŸ§ 
ThreadLocal Ä‘á»ƒ tÃ¡ch biá»‡t dá»¯ liá»‡u logic cho tá»«ng thread ğŸ”


MÃ¡y tÃ­nh cÃ³ nhiá»u core, cÃ¡c thread Ä‘Æ°á»£c táº¡o ra tá»«ng nhá»¯ng core cpu dá»±a trÃªn kernel

CÃ²n JVM cÃ³ bao gá»“m platform thread -> giÃºp tao ra nhiá»u Virtual Thread -> 1 core cpu cÃ³ thá»ƒ táº¡o ra Ä‘Æ°á»£c ráº¥t nhiá»u thread

Táº¡o ra Thread báº±ng memory , 1 thread cÃ³ thá»ƒ cá»¡ 2mb ram , nÃªn khi táº¡o 100k thread thÃ¬ sáº½ bá»‹ out of memory khiáº¿n cho mÃ¡y bá»‹ Ä‘á»¡ vÃ  lag
Luá»“ng cháº¡y nhiá»u nhÆ°ng ko tiÃªu tá»‘n tÃ i nguyÃªn CPU


jsp
-
-number THREAD
jc number md VM.native_memory summary
PhÃ¢n tÃ­ch summary,CÆ¡ cháº¿ snapshot, lÆ°u vÃ o bá»™ dá»¯ liá»‡u má»—i giai Ä‘oáº¡n chá»¥p láº¡i 1 láº§n

Æ¯u Ä‘iá»ƒm
táº¡o nhiá»u thread lÃªn cáº£ triá»‡u giÃºp tá»‘i Æ°u tá»‘c Ä‘á»™
NhÆ°á»£c Ä‘iá»ƒm
TiÃªu tá»‘n nhiá»u ram náº¿u lÃ m sai cÃ¡ch
Náº¿u dÃ¹ng Ä‘á»ƒ cho dá»‹ch vá»¥ Ã­t ngÆ°á»i thÃ¬ siÃªu tá»‘n tÃ i nguyÃªn